<%# app/views/cleaning_assignments/_dashboard_card.html.erb %>

<div class="bg-gray-700 rounded-xl border border-gray-600 shadow-lg hover:shadow-xl transition-all duration-200 transform hover:-translate-y-0.5 w-full">
  <%= link_to cleaning_assignment_path(cleaning_assignment), class: "block p-6" do %>
    <%# Header with Business Name and Status Badge %>
    <div class="flex justify-between items-start mb-4">
      <h3 class="text-base sm:text-lg font-semibold text-white truncate max-w-[calc(100%-80px)]">
        <%= cleaning_assignment.business.name %>
      </h3>
      <%= render "shared/badge", status: cleaning_assignment.status, type: :cleaning_assignment %>
    </div>

    <%# Details: Address, Team, Scheduled Date & Time %>
    <div class="space-y-3 text-gray-300 text-xs sm:text-sm">
      <div class="flex items-center justify-between" data-controller="copy" data-copy-text-value="<%= cleaning_assignment.business.address %>">
        <div class="flex items-center flex-1 min-w-0">
          <svg class="w-4 h-4 mr-2 text-gray-400 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5S10.62 6.5 12 6.5s2.5 1.12 2.5 2.5S13.38 11.5 12 11.5z"/>
          </svg>
          <span class="truncate" data-copy-target="text"><%= cleaning_assignment.business.address %></span>
        </div>
        <button type="button" 
                data-action="click->copy#copy" 
                data-copy-target="button"
                class="ml-2 p-1 text-gray-400 hover:text-blue-400 transition-colors duration-200 flex items-center space-x-1 flex-shrink-0"
                title="Copy address"
                onclick="event.stopPropagation();">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
          </svg>
          <span class="text-xs">Copy</span>
        </button>
      </div>
      <div class="flex items-center justify-between">
        <div class="flex items-center">
          <svg class="w-4 h-4 mr-2 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
            <circle cx="9" cy="7" r="4"></circle>
            <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
            <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
          </svg>
          <span>Team <%= cleaning_assignment.team.name %></span>
        </div>

        <div class="flex items-center">
          <svg class="w-4 h-4 mr-2 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          <span><%= cleaning_assignment.scheduled_date.strftime("%a %d, %I:%M %p") %></span>
        </div>
      </div>
    </div>
  <% end %>
</div> 